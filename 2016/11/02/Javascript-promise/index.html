<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JavaScript Promise | rainyleo blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="A promise is a placeholder for the result of an asynchronous operation. Instead of subscribing to an event or passing a callback to a function, the function can return a promise
Syntaxnew Promise( /*">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript Promise">
<meta property="og:url" content="http://rainyleo.com/2016/11/02/Javascript-promise/index.html">
<meta property="og:site_name" content="rainyleo blog">
<meta property="og:description" content="A promise is a placeholder for the result of an asynchronous operation. Instead of subscribing to an event or passing a callback to a function, the function can return a promise
Syntaxnew Promise( /*">
<meta property="og:updated_time" content="2016-11-03T18:41:31.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript Promise">
<meta name="twitter:description" content="A promise is a placeholder for the result of an asynchronous operation. Instead of subscribing to an event or passing a callback to a function, the function can return a promise
Syntaxnew Promise( /*">
  
    <link rel="alternate" href="/atom.xml" title="rainyleo blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">rainyleo blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://rainyleo.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Javascript-promise" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/02/Javascript-promise/" class="article-date">
  <time datetime="2016-11-02T12:22:42.000Z" itemprop="datePublished">2016-11-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      JavaScript Promise
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>A promise is a placeholder for the result of an asynchronous operation. Instead of subscribing to an event or passing a callback to a function, the function can return a promise</p>
<h2 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h2><p><code>new Promise( /* executor */ function(resolve, reject) { ... } );</code> </p>
<p><strong>Parameters: executor</strong></p>
<p>A function that is passed the arguments resolve and reject. The executor function is executed immediately by the Promise implementation, passing <code>resolve</code> and <code>reject</code> functions (the executor is called before the Promise constructor even returns the created object). The resolve and reject functions, when called, resolve or reject the promise respectively. The executor normally initiates some asynchronous work and then, once that completes, calls either the resolve or reject function to resolve the promise or else reject it if an error occurred</p>
<p>Calling <code>resolve()</code> triggers an asynchronous operation. Functions passed to <code>then()</code> and <code>catch()</code> are executed asynchronously, because these are also added to the <code>job queue</code></p>
<p>Each call to <code>then()</code> or <code>catch()</code> actually creates and returns another promise. This second promise is resolved only when the first has been fulfilled or rejected<br><a id="more"></a><br><strong>Prototype Methods</strong></p>
<p><code>Promise.prototype.catch(onRejected)</code><br>Appends a rejection handler callback to the promise, and returns a new promise resolving to the return value of the callback if it is called, or to its original fulfillment value if the promise is instead fulfilled.<br><code>Promise.prototype.then(onFulfilled, onRejected)</code><br>Appends fulfillment and rejection handlers to the promise, and returns a new promise resolving to the return value of the called handler, or to its original settled value if the promise was not handled (i.e. if the relevant handler onFulfilled or onRejected is not a function).    </p>
<ul>
<li>Example  </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> promiseClean = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> isClean = <span class="literal">true</span>;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (isClean) &#123;</div><div class="line">    resolve(<span class="string">'Clean'</span>);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    reject(<span class="string">'not Clean'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">promiseClean.then(<span class="function"><span class="keyword">function</span> (<span class="params">fromResolve</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'this room is '</span> + fromResolve);</div><div class="line">&#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">fromReject</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'this room is '</span> + fromReject);</div><div class="line">&#125;);</div><div class="line"><span class="comment">// 'this room is Clean'</span></div></pre></td></tr></table></figure>
<h2 id="Terminology"><a href="#Terminology" class="headerlink" title="Terminology"></a>Terminology</h2><p>Any Promise object is in one of three mutually exclusive states: <code>fulfilled</code>, <code>rejected</code>, and <code>pending</code>:</p>
<ul>
<li>A promise p is <code>fulfilled</code> if <code>p.then(f, r)</code> will immediately enqueue a Job to call the function f.</li>
<li>A promise p is <code>rejected</code> if <code>p.then(f, r)</code> will immediately enqueue a Job to call the function r.</li>
<li>A promise is <code>pending</code> if it is neither fulfilled nor rejected.</li>
<li>A promise is said to be <code>settled</code> if it is not pending, i.e. if it is either fulfilled or rejected.</li>
</ul>
<p>A promise is <code>resolved</code> if it is settled or if it has been “locked in” to match the state of another promise. Attempting to resolve or reject a resolved promise has no effect. An unresolved promise is always in the pending state. A resolved promise may be pending, fulfilled or rejected.</p>
<h2 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h2><p><code>Promise.resolve()</code><br>The Promise.resolve() method accepts a single argument and returns a promise in the fulfilled state. That means no job scheduling occurs, and you need to add one or more fulfillment handlers to the promise to retrieve the value.  </p>
<p><code>Promise.reject()</code><br>You can also create rejected promises by using the Promise.reject() method. This works like Promise.resolve() except the created promise is in the rejected state</p>
<p>If you pass a promise to either the Promise.resolve() or Promise.reject() method, the promise is returned without modification.  </p>
<p><code>Promise.all()</code><br>Promise.all takes an array of promises and creates a promise that fulfills when all of them successfully complete. You get an array of results (whatever the promises fulfilled to) in the same order as the promises you passed in.  </p>
<p><code>Promise.race()</code><br>Returns a promise that fulfills or rejects as soon as one of the promises in the iterable fulfills or rejects, with the value or reason from that promise.</p>
<h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><ul>
<li>A promise can only succeed or fail <code>once</code>. </li>
<li>If a promise has succeeded or failed and you later add a success/failure callback, the correct callback will be called, even though the event took place earlier.</li>
</ul>
<p>This is extremely useful for async success/failure, because you’re less interested in the exact time something became available, and more interested in reacting to the outcome.</p>
<ul>
<li>Queuing asynchronous actions</li>
</ul>
<p>You can also chain thens to run async actions in sequence.</p>
<p>When you return something from a <code>then()</code> callback, it’s a bit magic. If you return a value, the next <code>then()</code> is called with that value. However, if you return something promise-like, the next <code>then()</code> waits on it, and is only called when that promise settles (succeeds/fails)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rainyleo.com/2016/11/02/Javascript-promise/" data-id="civ34r0fr0000m71nulwam16q" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/11/03/redux源码解读(一)-createStore/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nieuwer</strong>
      <div class="article-nav-title">
        
          redux源码解读(一)-createStore
        
      </div>
    </a>
  
  
    <a href="/2016/11/01/JavaScript-Object-Methods/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ouder</strong>
      <div class="article-nav-title">一张图看明白JavaScript中对象的方法</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Labels</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/atom/">atom</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/atom/" style="font-size: 10px;">atom</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/03/redux源码解读(五)-applyMiddleware/">redux源码解读(五)-applyMiddleware</a>
          </li>
        
          <li>
            <a href="/2016/11/03/redux源码解读(四)-compose/">redux源码解读(四)-compose</a>
          </li>
        
          <li>
            <a href="/2016/11/03/redux源码解读(三)-bindActionCreators/">redux源码解读(三)-bindActionCreators</a>
          </li>
        
          <li>
            <a href="/2016/11/03/redux源码解读(二)-combineReducers/">redux源码解读(二)-combineReducers</a>
          </li>
        
          <li>
            <a href="/2016/11/03/redux源码解读(一)-createStore/">redux源码解读(一)-createStore</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 rainyLeo<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>